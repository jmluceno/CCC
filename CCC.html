<!DOCTYPE html>
<html>
 <head>
  <title>Cabalistic Color Coordinator</title>
  <script src="https://unpkg.com/react@15.3.2/dist/react.js"></script>
  <script src="https://unpkg.com/react-dom@15.3.2/dist/react-dom.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
  <!--load google fonts-->
	<link href="https://fonts.googleapis.com/css?family=Vesper+Libre" rel="stylesheet">
  <style>
	@font-face {
    font-family: 'Astrological';
    src:url('fonts/Astrological.ttf.woff') format('woff'),
    url('fonts/Astrological.ttf.svg#Astrological') format('svg'),
    url('fonts/Astrological.ttf.eot'),
    url('fonts/Astrological.ttf.eot?#iefix') format('embedded-opentype'); 
    font-weight: normal;
    font-style: normal;
	}
	
</style>

  <script src="js/data.js"></script>
   <style>
    #container {
      padding: 50px;
      background-color: #FFF;
	  font-family: "Vesper Libre";
	  line-height: 1.2;
	  width: 400;
    }
	
  </style>
  

</head>
<body>
	<div id="container"></div>
	<script type="text/babel">
		
		
		var App = React.createClass({
			getInitialState: function() {
				return {
					symbol: "start"
				};
			},
			changeSymbol: function(value) {
				this.setState({
					symbol: value
				});
			},
			
			render: function() {
				var inputStyle = {
					float: "none",
					margin: 10
				};
				
				var titleStyle = {
					textAlign: "center",
					fontSize: 20,
					textTransform: "uppercase"

				};
				
				var buttonStyle = {
					height: 45,
					width: 45,
					fontSize: 20,
					textAlign: "center",
					fontFamily: "Astrological",
					marginRight: 10,
					marginBottom: 10
				};
				
				var appStyle = {
					width: 490,
					border: "5px solid black",
					paddingTop: 10,
					paddingLeft: 10
				};
				
				return(
					<div style={appStyle}>
						<Output symbol={this.state.symbol}/>
						<div style={inputStyle}>
							<div style={titleStyle}>Spheres</div>
								<button style={buttonStyle} onClick={() => this.changeSymbol("spherePrimum")}>9</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("sphereFixed")}>8</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("sphereSaturn")}>6</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("sphereDaath")}>7</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("sphereJupiter")}>5</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("sphereMars")}>4</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("sphereSun")}>}</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("sphereVenus")}>2</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("sphereMercury")}>1</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("sphereLuna")}>~</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("sphereElements")}>y</button>
							<div style={titleStyle}>Elements</div>
								<button style={buttonStyle} onClick={() => this.changeSymbol("air")}>q</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("water")}>w</button>							
								<button style={buttonStyle} onClick={() => this.changeSymbol("fire")}>e</button>
							<div style={titleStyle}>Paths</div>
								<button style={buttonStyle} onClick={() => this.changeSymbol("mercury")}>1</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("luna")}>~</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("venus")}>2</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("aries")}>!</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("taurus")}>&</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("gemini")}>#</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("cancer")}>$</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("leo")}>%</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("virgo")}>^</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("jupiter")}>5</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("libra")}>&</button>							
								<button style={buttonStyle} onClick={() => this.changeSymbol("scorpio")}>*</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("sagittarius")}>(</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("capricorn")}>)</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("mars")}>4</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("aquarius")}>_</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("pisces")}>+</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("sol")}>}</button>							
								<button style={buttonStyle} onClick={() => this.changeSymbol("saturn")}>6</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("spirit")}>t</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("earth")}>y</button>
						</div>
					</div>
				);
			}
		});
		
		
		var Output = React.createClass({			
			
			render: function() {
				var outputStyle = {
					height: 250
					
				};
				return(
					<div style={outputStyle}>
						<TitleBoxParent symbol={this.props.symbol}/>
						<ColorBoxParent symbol={this.props.symbol}/>
						<ColorNameParent symbol={this.props.symbol}/>
					</div>
				);
			}
		});
				
		var TitleBoxParent = React.createClass({
			
			render: function() {
				var symbol = this.props.symbol;
				var titles = data[symbol].map(function(color){
					return (<TitleBox content={color.scale}/>);
				});
				return (<div>{titles}</div>)
				
			}
		});
		var TitleBox = React.createClass({
			render: function() {
				var boxStyle = {
					width: 100,
					float: "left",
					marginRight: 20,
					textAlign: "center"
				};
				return (
					<div style={boxStyle}>{this.props.content}</div>
				);
			}
		});
		
		var ColorBoxParent = React.createClass({
			render: function() {
				var symbol = this.props.symbol;
				var boxesStyle = {
					clear: "both"
				};
				var boxes = data[symbol].map(function(color){
					if (color.quartered) {
						if (color.flecked) {
							return (<ColorBox quartered={color.quartered} flecked={color.flecked}/>);
						} else {
							return (<ColorBox quartered={color.quartered}/>);
						}
						
					} else if (color.flecked) {
						return (<ColorBox bgc={color.c} flecked={color.flecked}/>);
					} else if (color.rayed) {
						return (<ColorBox bgc={color.c} rayed={color.rayed}/>);
					} else if (color.prismatic) {
						return (<ColorBox prismatic={color.prismatic}/>);
					} else if (color.merging) {
						return (<ColorBox merging={color.merging}/>);
					} else {
						return (<ColorBox bgc={color.c}/>);
					}
				});
				return (<div style={boxesStyle}>{boxes}</div>)
				
			}
		});
		
		var ColorBox = React.createClass({
			
			componentDidMount: function () {
				this.updateCanvas(this.props.bgc);
				return true;
			},
			componentDidUpdate: function () {
				this.updateCanvas(this.props.bgc);
			},
			updateCanvas: function(bgc) {
				var ctx = this.refs.canvas.getContext('2d');
				ctx.fillStyle = bgc;
				ctx.fillRect(0,0, 100, 100);
				if (this.props.quartered && this.props.flecked) {
					this.quarterIt(this.props.quartered);
					this.fleckIt(this.props.flecked);
				} else if (this.props.quartered) {
					this.quarterIt(this.props.quartered);
				} else if (this.props.flecked) {
					this.fleckIt(this.props.flecked);
				} else if (this.props.prismatic) {
					this.prismaticIt(this.props.prismatic);
				} else if (this.props.rayed) {
					this.rayIt(this.props.rayed);
				} else if (this.props.merging) {
					this.mergeIt(this.props.merging);
				}
			},
			
			quarterIt: function(quarterColors) {
				var ctx = this.refs.canvas.getContext('2d');
				ctx.fillStyle = quarterColors[0];
				ctx.fillRect(0,0, 50, 50);
				ctx.fillStyle = quarterColors[1];
				ctx.fillRect(50,0, 50, 50);
				ctx.fillStyle = quarterColors[2];
				ctx.fillRect(0,50, 50, 50);
				ctx.fillStyle = quarterColors[3];
				ctx.fillRect(50,50, 50, 50);				
			}, 
			
			mergeIt: function(mergingColors) {
				var ctx = this.refs.canvas.getContext('2d');
				var grd=ctx.createLinearGradient(0,50,100,50);
				grd.addColorStop(0,mergingColors[0]);
				grd.addColorStop(1,mergingColors[1]);

				ctx.fillStyle=grd;
				ctx.fillRect(0,0,100,100);
			},
			
			fleckIt: function(fleckColor) { //written by Scott Wilde
				var ctx = this.refs.canvas.getContext('2d');
				var flecks = [];
				var maxAngle = (Math.PI*2)/3.9;
				var minAngle = (Math.PI*2)/6.9;
				var maxRadius = 1.5;
				var minRadius = 1;

				//draw 200 pink flecks at 200 random points in the box
				for (var i = 0; i < 200; i++) {

					// create the fleck and assign center point
					var fleck = {
						x: Math.random() * 100,
						y: Math.random() * 100,
						points: []
					};
					flecks.push(fleck);

					// create the points
					var angleOffset = Math.random() * (Math.PI*2);
					var angle = 0;

					// go until we've completed a circle
					while (angle < (Math.PI*2)) {
						var radius = Math.random() * (maxRadius - minRadius) + minRadius;
						var point = {
							x: Math.cos(angleOffset + angle) * radius,
							y: Math.sin(angleOffset + angle) * radius
						};
						fleck.points.push(point);

						angle += Math.random() * (maxAngle - minAngle) + minAngle;
					}
				}

				flecks.forEach(fleck => {
					var colorIndex = Math.floor(Math.random() * (fleckColor.length));
					ctx.beginPath();
					ctx.moveTo(fleck.points[0].x + fleck.x, fleck.points[0].y + fleck.y);
					for (var j = 1; j < fleck.points.length; j++) {
						var point = fleck.points[j];
						ctx.lineTo(point.x + fleck.x, point.y + fleck.y);
					}
					ctx.closePath();
					ctx.fillStyle = fleckColor[colorIndex];
					ctx.fill();
				});
			}, //end fleckIt
			
			rayIt: function(rayColor) {
				
				var points = [];
				var ctx = this.refs.canvas.getContext('2d');
				
				var angle = 0,
					minRadius = 40,
					maxRadius = 70;
				
				while (angle < (Math.PI * 2)) {
					var radius = Math.floor(Math.random() * (maxRadius - minRadius) + minRadius);
					var point = {
						x: Math.cos(angle) * radius + 50,
						y: Math.sin(angle) * radius + 50
					}
					points.push(point);
					angle += ((Math.PI * 2) / 20);
				}
				
				//draw lines to the points
				ctx.beginPath();
				
				points.forEach(point => {
					ctx.moveTo(50, 50);
					ctx.lineTo(point.x, point.y);
					ctx.closePath();
					ctx.strokeStyle = rayColor;
					ctx.stroke();
					
				});
			},
			
			prismaticIt: function(prismaticColors) {
				var ctx = this.refs.canvas.getContext('2d');
				var radius = 70;
				for (var i = prismaticColors.length - 1; i > -1; i--) {
					ctx.beginPath();
					ctx.arc(50,50,radius,0,2*Math.PI);
					ctx.fillStyle = prismaticColors[i];
					ctx.fill();
					radius /= 1.4;
				}
				
			},
			 
					
			render: function() {
				var boxStyle = {
					width: 100,
					height: 100,
					float: "left",
					marginRight: 15,
					border: "2px solid black"
				};
				
				return (
					<div style={boxStyle}>
						<canvas ref="canvas" width={100} height={100}/>
					</div>
				);
			}
		});
		
		var ColorNameParent = React.createClass({

			render: function() {		
				var symbol = this.props.symbol;
				var boxesStyle = {
					clear: "both"
				};
				var boxes = data[symbol].map(function(color){
					return (<ColorNameBox content={color.colorName}/>);
				});
				return (<div style={boxesStyle}>{boxes}</div>)
				
			}
		});
		
		var ColorNameBox = React.createClass({
			render: function() {
				var boxStyle = {
					width: 100,
					float: "left",
					marginRight: 20,
					textAlign: "center"
				};
				return (
					<div style={boxStyle}>
						{this.props.content}
					</div>
				);
			}
		});
		
		var destination = document.querySelector("#container");
		ReactDOM.render(
		  <App/>,
		  destination
		);
	</script>
</body>
</html>
