<!DOCTYPE html>
<html>
 <head>
  <title>Cabalistic Color Coordinator</title>
  <script src="https://unpkg.com/react@15.3.2/dist/react.js"></script>
  <script src="https://unpkg.com/react-dom@15.3.2/dist/react-dom.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
  <!--load google fonts-->
	<link href="https://fonts.googleapis.com/css?family=Vesper+Libre" rel="stylesheet">
  <style>
	@font-face {
    font-family: 'Astrological';
    src:url('fonts/Astrological.ttf.woff') format('woff'),
    url('fonts/Astrological.ttf.svg#Astrological') format('svg'),
    url('fonts/Astrological.ttf.eot'),
    url('fonts/Astrological.ttf.eot?#iefix') format('embedded-opentype'); 
    font-weight: normal;
    font-style: normal;
	}
	
</style>

  <script src="js/data.js"></script>
   <style>
    #container {
      background-color: #FFF;
	  font-family: "Vesper Libre";
	  line-height: 1.2;
	  width: 400;
    }
	
  </style>
  

</head>
<body>
	<div id="container"></div>
	<script type="text/babel">
		
		
		var App = React.createClass({
			getInitialState: function() {
				return {
					symbol: "Cabalistic Color Coordinator"
				};
			},
			changeSymbol: function(value) {
				this.setState({
					symbol: value
				});
			},
			
			render: function() {
				var inputStyle = {
					float: "none",
					margin: 10
				};
				
				var titleStyle = {
					textAlign: "center",
					fontSize: 20,
					textTransform: "uppercase"

				};
				
				var buttonStyle = {
					height: 50,
					width: 50,
					fontSize: 20,
					textAlign: "center",
					fontFamily: "Astrological",
					marginRight: 10,
					marginBottom: 10
				};
				
				var appStyle = {
					maxWidth: 500,
					border: "5px solid black",
					margin: "0 auto 0 auto"
					
				};
				
				return(
					<div style={appStyle}>
						<Output symbol={this.state.symbol}/>
						<div style={inputStyle}>
							<div style={titleStyle}>Spheres</div>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Sphere of the Premum Mobile")}>9</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Sphere of the Fixed Stars")}>8</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Sphere of Saturn")}>6</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Sphere of Daath")}>7</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Sphere of Jupiter")}>5</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Sphere of Mars")}>4</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Sphere of the Sun")}>}</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Sphere of Venus")}>2</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Sphere of Mercury")}>1</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Sphere of Luna")}>~</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Sphere of the Elements")}>y</button>
							<div style={titleStyle}>Elements</div>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Air")}>q</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Water")}>w</button>							
								<button style={buttonStyle} onClick={() => this.changeSymbol("Fire")}>e</button>
							<div style={titleStyle}>Paths</div>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Mercury")}>1</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Luna")}>~</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Venus")}>2</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Aries")}>!</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Taurus")}>&</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Gemini")}>#</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Cancer")}>$</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Leo")}>%</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Virgo")}>^</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Jupiter")}>5</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Libra")}>&</button>							
								<button style={buttonStyle} onClick={() => this.changeSymbol("Scorpio")}>*</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Sagittarius")}>(</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Capricorn")}>)</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Mars")}>4</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Aquarius")}>_</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Pisces")}>+</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Sol")}>}</button>							
								<button style={buttonStyle} onClick={() => this.changeSymbol("Saturn")}>6</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Spirit")}>t</button>
								<button style={buttonStyle} onClick={() => this.changeSymbol("Earth")}>y</button>
						</div>
					</div>
				);
			}
		});
		
		
		var Output = React.createClass({			
			
			render: function() {
				var outputStyle = {
					height: 280, 
					width: "100%"
					
				};
				return(
					<div style={outputStyle}>
						<TitleBox symbol={this.props.symbol}/>
						<ColorBoxParent symbol={this.props.symbol}/>
					</div>
				);
			}
		});
		
		var TitleBox = React.createClass({
			render: function() {
				var titleBoxStyle = {
					width: "100%",
					backgroundColor: "#000",
					color: "#FFF",
					textAlign: "center",
					fontSize: 28,
					paddingTop: 15,
					paddingBottom: 15,
					textTransform: "uppercase"
				};
				return (<div style={titleBoxStyle}>{this.props.symbol}</div>);
			}
		});
		
		
		
		var ColorBoxParent = React.createClass({
			render: function() {
				var symbol = this.props.symbol;
				var colorBoxParentStyle = {
					width: "100%",
					paddingLeft: 18,
					paddingTop: 10
				}
				var boxes = data[symbol].map(function(colorDataObject){
					return(<ColorBox data={colorDataObject}/>);
				});
				return (
					<div style={colorBoxParentStyle}>{boxes}</div>
				);
			}
		});
		
		var ColorBox = React.createClass({			
			render: function() {
				var colorDataObject = this.props.data;
				var canvasBox;
				var colorBoxStyle = {
					width: 100,
					float: "left",
					marginRight: 20,
				}
			
				if (colorDataObject.quartered) {
					if (colorDataObject.flecked) {
						canvasBox = <MakeCanvasBox quartered={colorDataObject.quartered} flecked={colorDataObject.flecked}/>;
					} else {
						canvasBox = <MakeCanvasBox quartered={colorDataObject.quartered}/>;
					}			
				} else if (colorDataObject.flecked) {
					canvasBox = <MakeCanvasBox bgc={colorDataObject.c} flecked={colorDataObject.flecked}/>;
				} else if (colorDataObject.rayed) {
					canvasBox = <MakeCanvasBox bgc={colorDataObject.c} rayed={colorDataObject.rayed}/>;
				} else if (colorDataObject.prismatic) {
					canvasBox = <MakeCanvasBox prismatic={colorDataObject.prismatic}/>;
				} else if (colorDataObject.merging) {
					canvasBox = <MakeCanvasBox merging={colorDataObject.merging}/>;
				} else {
					canvasBox = <MakeCanvasBox bgc={colorDataObject.c}/>;
				}
				return (
					<div style={colorBoxStyle}>
						<ScaleName name={colorDataObject.scale}/>
						<div>{canvasBox}</div>
						<ColorName name={colorDataObject.colorName}/>
					</div>
				);
			}
		});		
		
		var ScaleName = React.createClass({
			render: function() {
				var boxStyle = {
					width: 100,
					textAlign: "center",
					fontSize: 18,
					textTransform: "uppercase"
				};
				return (
					<div style={boxStyle}>
						{this.props.name}
					</div>
				);
			}
		});
		
		var MakeCanvasBox = React.createClass({
			componentDidMount: function () {
				this.updateCanvas(this.props.bgc);
				return true;
			},
			componentDidUpdate: function () {
				this.updateCanvas(this.props.bgc);
			},
			updateCanvas: function(bgc) {
				var ctx = this.refs.canvas.getContext('2d');
				ctx.fillStyle = bgc;
				ctx.fillRect(0,0, 100, 100);
				if (this.props.quartered && this.props.flecked) {
					this.quarterIt(this.props.quartered);
					this.fleckIt(this.props.flecked);
				} else if (this.props.quartered) {
					this.quarterIt(this.props.quartered);
				} else if (this.props.flecked) {
					this.fleckIt(this.props.flecked);
				} else if (this.props.prismatic) {
					this.prismaticIt(this.props.prismatic);
				} else if (this.props.rayed) {
					this.rayIt(this.props.rayed);
				} else if (this.props.merging) {
					this.mergeIt(this.props.merging);
				}
			},
			
			quarterIt: function(quarterColors) {
				var ctx = this.refs.canvas.getContext('2d');
				ctx.fillStyle = quarterColors[0];
				ctx.fillRect(0,0, 50, 50);
				ctx.fillStyle = quarterColors[1];
				ctx.fillRect(50,0, 50, 50);
				ctx.fillStyle = quarterColors[2];
				ctx.fillRect(0,50, 50, 50);
				ctx.fillStyle = quarterColors[3];
				ctx.fillRect(50,50, 50, 50);				
			}, 
			
			mergeIt: function(mergingColors) {
				var ctx = this.refs.canvas.getContext('2d');
				var grd=ctx.createLinearGradient(0,50,100,50);
				grd.addColorStop(0,mergingColors[0]);
				grd.addColorStop(1,mergingColors[1]);

				ctx.fillStyle=grd;
				ctx.fillRect(0,0,100,100);
			},
			
			fleckIt: function(fleckColor) { //written by Scott Wilde
				var ctx = this.refs.canvas.getContext('2d');
				var flecks = [];
				var maxAngle = (Math.PI*2)/3.9;
				var minAngle = (Math.PI*2)/6.9;
				var maxRadius = 1.5;
				var minRadius = 1;

				//draw 200 pink flecks at 200 random points in the box
				for (var i = 0; i < 200; i++) {

					// create the fleck and assign center point
					var fleck = {
						x: Math.random() * 100,
						y: Math.random() * 100,
						points: []
					};
					flecks.push(fleck);

					// create the points
					var angleOffset = Math.random() * (Math.PI*2);
					var angle = 0;

					// go until we've completed a circle
					while (angle < (Math.PI*2)) {
						var radius = Math.random() * (maxRadius - minRadius) + minRadius;
						var point = {
							x: Math.cos(angleOffset + angle) * radius,
							y: Math.sin(angleOffset + angle) * radius
						};
						fleck.points.push(point);

						angle += Math.random() * (maxAngle - minAngle) + minAngle;
					}
				}

				flecks.forEach(fleck => {
					var colorIndex = Math.floor(Math.random() * (fleckColor.length));
					ctx.beginPath();
					ctx.moveTo(fleck.points[0].x + fleck.x, fleck.points[0].y + fleck.y);
					for (var j = 1; j < fleck.points.length; j++) {
						var point = fleck.points[j];
						ctx.lineTo(point.x + fleck.x, point.y + fleck.y);
					}
					ctx.closePath();
					ctx.fillStyle = fleckColor[colorIndex];
					ctx.fill();
				});
			}, //end fleckIt
			
			rayIt: function(rayColor) {
				
				var points = [];
				var ctx = this.refs.canvas.getContext('2d');
				
				var angle = 0,
					minRadius = 40,
					maxRadius = 70;
				
				while (angle < (Math.PI * 2)) {
					var radius = Math.floor(Math.random() * (maxRadius - minRadius) + minRadius);
					var point = {
						x: Math.cos(angle) * radius + 50,
						y: Math.sin(angle) * radius + 50
					}
					points.push(point);
					angle += ((Math.PI * 2) / 20);
				}
				
				//draw lines to the points
				ctx.beginPath();
				
				points.forEach(point => {
					ctx.moveTo(50, 50);
					ctx.lineTo(point.x, point.y);
					ctx.closePath();
					ctx.strokeStyle = rayColor;
					ctx.stroke();
					
				});
			},
			
			prismaticIt: function(prismaticColors) {
				var ctx = this.refs.canvas.getContext('2d');
				var radius = 70;
				for (var i = prismaticColors.length - 1; i > -1; i--) {
					ctx.beginPath();
					ctx.arc(50,50,radius,0,2*Math.PI);
					ctx.fillStyle = prismaticColors[i];
					ctx.fill();
					radius /= 1.4;
				}
				
			},
			 				
			render: function() {
				var boxStyle = {
					width: 100,
					height: 100,
					border: "2px solid black",
					marginBottom: 10
				};
				
				return (
					<div style={boxStyle}>
						<canvas ref="canvas" width={100} height={100}/>
					</div>
				);
			}
		});
		
		var ColorName = React.createClass({
			render: function() {
				var boxStyle = {
					width: 100,
					textAlign: "center",
					fontSize: 16
				};
				return (
					<div style={boxStyle}>
						{this.props.name}
					</div>
				);
			}
		});
		
		var destination = document.querySelector("#container");
		ReactDOM.render(
		  <App/>,
		  destination
		);
	</script>
</body>
</html>
